{"version":3,"sources":["screens/category/screen.tsx","screens/category/index.ts","services/api/utils.ts","services/api/api.ts","services/news/api.ts","services/api/index.ts","shared/components/news-card/news-card.tsx","shared/components/news-card/index.ts","services/news/index.ts","shared/components/news-list/news-list.tsx","shared/components/news-list/index.ts","../node_modules/react-use/esm/useAsync.js"],"names":["Screen","goBack","useHistory","useParams","code","category","state","useAsync","a","async","newsApi","fetch","country","onClick","className","loading","items","value","handleResponseErrors","error","Promise","reject","status","statusText","response","data","handleRequestConfig","config","params","process","Api","api","request","url","method","undefined","this","axios","create","baseURL","headers","Accept","timeout","interceptors","use","News","apiPath","payload","articles","NewsCard","title","description","urlToImage","source","content","height","src","alt","to","pathname","id","NewsList","map","item","index","key","fn","deps","_a","callback"],"mappings":"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","file":"static/js/6.9f14be9a.chunk.js","sourcesContent":["import React, {Fragment} from 'react'\nimport {useHistory, useParams} from 'react-router-dom'\nimport {useAsync} from \"react-use\";\nimport newsApi, {Category} from \"services/news\";\nimport NewsList from \"../../shared/components/news-list\";\nimport Loader from 'shared/components/loader'\n\nconst Screen = () => {\n    const {goBack} = useHistory()\n    const {code, category} = useParams<{\n        category: Category,\n        code: string\n    }>();\n\n    const state = useAsync(async () => {\n        return await newsApi.fetch({\n            country: code,\n            //@ts-ignore\n            category\n        });\n    }, [code]);\n\n\n    return <Fragment>\n        <h1 onClick={goBack}\n            className='text-base text-3xl capitalize my-2 inline-flex items-center cursor-pointer'>\n            Top\n\n            <strong className='mx-2'>{category} </strong> news\n            from {code === 'us' ? 'United States' : 'Great Britain'}\n        </h1>\n        {state.loading ? <Loader/> : <NewsList items={state.value || []}/>}\n        <div className='flex justify-start items-center py-5'>\n            <button onClick={goBack} className='cursor-pointer outline-none focus:outline-none'>\n                <span className='text-base'> Back to list</span>\n            </button>\n        </div>\n    </Fragment>\n}\n\nexport default Screen;\n","export {default} from './screen'\n","import {AxiosError, AxiosRequestConfig} from 'axios';\nimport {IResponseError} from './types';\n\nexport const handleResponseErrors = (error: AxiosError): Promise<IResponseError> => {\n    if (error.code === 'ECONNABORTED') {\n        return Promise.reject({\n            status: 408,\n            statusText: 'Timeout request',\n        });\n    }\n    return Promise.reject({\n        status: error.response ? error.response.status : 500,\n        statusText: error.response ? error.response.statusText : 'Network Error',\n        ...(error.response && error.response.data ? error.response.data : {}),\n    });\n};\n\n/**\n * @description modify request config each time\n *\n * @param {*} config\n */\nexport const handleRequestConfig = async (\n    config: AxiosRequestConfig,\n): Promise<AxiosRequestConfig> => {\n    return {\n        ...config,\n        params: {\n            ...config.params,\n            'apiKey': process.env.REACT_APP_API_KEY,\n        },\n    };\n};\n\n","import axios, {AxiosInstance, AxiosRequestConfig, AxiosResponse, Method} from 'axios';\n\nimport {Omit} from '../../interfaces';\n\nimport {handleRequestConfig, handleResponseErrors} from './utils';\n\nconst TIMEOUT = 5000;\n\n\nexport default class Api {\n    protected api: AxiosInstance;\n\n    constructor() {\n        this.api = axios.create({\n            baseURL: process.env.REACT_APP_API_URL,\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json',\n            },\n            timeout: TIMEOUT,\n        });\n\n        this.api.interceptors.response.use(undefined, handleResponseErrors);\n        this.api.interceptors.request.use(handleRequestConfig);\n    }\n\n    protected request = async <T>(\n        url: string,\n        method: Method = 'GET',\n        data: object | undefined = undefined,\n        params: object | undefined = undefined,\n        config?: Omit<AxiosRequestConfig, 'url' | 'method' | 'data' | 'params' | 'transformResponse'>,\n    ): Promise<T> => {\n        const response = await this.api.request<T, AxiosResponse>({\n            data,\n            method,\n            params,\n            url,\n            ...config,\n        });\n\n        return response.data;\n    };\n\n}\n","import Api from './../api'\nimport {INews, INewsResponse, IPayload} from './types'\n\n\nclass News extends Api {\n    private apiPath: string = '/top-headlines'\n\n    public fetch = async (payload: IPayload): Promise<INews[]> => {\n        const data = await this.request<INewsResponse>(this.apiPath, 'get', undefined, payload);\n        return data.articles\n    }\n}\n\n\nexport default new News()\n","export {default} from './api'\n\nexport * from './types';\n","import React, {FunctionComponent} from 'react'\nimport {INews} from 'services/news'\nimport {Link, useParams} from 'react-router-dom'\n\n\nconst NewsCard: FunctionComponent<INews> = ({title, description, urlToImage, source, content}) => {\n    const {code} = useParams()\n    return <div className=\"max-w-sm rounded overflow-hidden shadow-lg min-h-full flex flex-col justify-between\">\n        <img className=\"w-full h-64 object-cover\" height={200}\n             src={urlToImage || 'http://www.geographicexperiences.com/wp-content/uploads/revslider/home5/placeholder-1200x500.png'}\n             alt={title}/>\n        <div className=\"px-6 py-4\">\n            <div className=\"font-bold mb-2 h-32 sm:text-sm md:text-base overflow-y-hidden\">{title}</div>\n            <p className=\"text-gray-700 text-base overflow-hidden h-32\">\n                {description}\n            </p>\n        </div>\n        <div className=\"px-6 py-4 flex flex-row-reverse\">\n            <Link to={{\n                pathname: `/${code}/news/${source.id}`,\n                state: {\n                    title,\n                    urlToImage,\n                    content\n                }\n            }\n            } className=\"cursor-pointer\">\n            <span\n                className=\"block bg-gray-200 rounded-full px-8 py-4 text-sm font-semibold text-gray-700 hover:bg-gray-500\">More</span>\n            </Link>\n        </div>\n    </div>\n}\n\n\nexport default NewsCard\n","export {default} from './news-card'\n","export {default} from './api'\nexport * from './types'\n","import React, {FunctionComponent} from 'react'\nimport NewsCard from 'shared/components/news-card'\nimport {INews} from 'services/news'\n\ninterface INewsList {\n    items: INews[]\n}\n\nconst NewsList: FunctionComponent<INewsList> = ({items}) => {\n    return <div className=\"flex flex-wrap\">\n        {items.map((item, index) => <div key={index} className={'w-full sm:w-1/2 md:w-1/3 mb-4 p-2'}>\n            <NewsCard key={item.source.id}{...item}/>\n        </div>)}\n    </div>\n}\n\n\nexport default NewsList;\n","export {default} from './news-list'\n","import { useEffect } from 'react';\nimport useAsyncFn from './useAsyncFn';\nexport default function useAsync(fn, deps) {\n  if (deps === void 0) {\n    deps = [];\n  }\n\n  var _a = useAsyncFn(fn, deps, {\n    loading: true\n  }),\n      state = _a[0],\n      callback = _a[1];\n\n  useEffect(function () {\n    callback();\n  }, [callback]);\n  return state;\n}"],"sourceRoot":""}