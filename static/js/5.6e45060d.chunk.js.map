{"version":3,"sources":["screens/search/components/search-input/search-input.tsx","../node_modules/react-use/esm/useUpdateEffect.js","../node_modules/react-use/esm/useFirstMountState.js","screens/search/screen.tsx","screens/search/index.ts","services/api/utils.ts","services/api/api.ts","services/news/api.ts","services/api/index.ts","shared/components/news-card/news-card.tsx","shared/components/news-card/index.ts","services/news/index.ts","shared/components/news-list/news-list.tsx","shared/components/news-list/index.ts","../node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/@babel/runtime/helpers/esm/nonIterableRest.js"],"names":["SearchInput","onChange","value","onEnter","onSubmit","React","useCallback","e","preventDefault","handleChange","currentTarget","className","type","placeholder","aria-label","effect","deps","isFirstMount","isFirst","current","useFirstMountState","Screen","useState","query","setQuery","code","useParams","useAsyncFn","q","a","async","newsApi","fetch","country","state","useUpdateEffect","loading","Array","isArray","length","items","handleResponseErrors","error","Promise","reject","status","statusText","response","data","handleRequestConfig","config","params","process","Api","api","request","url","method","undefined","this","axios","create","baseURL","headers","Accept","timeout","interceptors","use","News","apiPath","payload","articles","NewsCard","title","description","urlToImage","source","content","height","src","alt","to","pathname","id","NewsList","map","item","index","key","_slicedToArray","arr","i","Symbol","iterator","Object","prototype","toString","call","_arr","_n","_d","_e","_s","_i","next","done","push","err","TypeError"],"mappings":"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","file":"static/js/5.6e45060d.chunk.js","sourcesContent":["import React, {FunctionComponent} from \"react\";\n\n\ninterface ISearchInput {\n    onChange: (value: string) => void;\n    onEnter?: (value: string) => void;\n    value: string\n}\n\nconst SearchInput: FunctionComponent<ISearchInput> = ({onChange, value, onEnter}) => {\n\n    const onSubmit = React.useCallback((e) => {\n        e.preventDefault();\n        onEnter && onEnter(value)\n    }, [onEnter, value])\n\n    const handleChange = React.useCallback((e) => onChange(e.currentTarget.value), [onChange])\n\n    return <form onSubmit={onSubmit} className=\"flex items-center border-b border-b-2 border-teal-500 py-2\">\n        <input\n            value={value}\n            className=\"appearance-none bg-transparent border-none w-full text-gray-700 mr-3 py-1 px-2 leading-tight focus:outline-none\"\n            type=\"text\" placeholder=\"Search by term\" aria-label=\"Search\" onChange={handleChange}/>\n        <button\n            className=\"flex-shrink-0 bg-teal-500 hover:bg-teal-700 border-teal-500 hover:border-teal-700 text-sm border-4 text-white py-1 px-2 rounded focus:outline-none\"\n            type=\"submit\">\n            Search\n        </button>\n\n    </form>\n}\n\n\nexport default SearchInput;\n","import { useEffect } from 'react';\nimport { useFirstMountState } from './useFirstMountState';\n\nvar useUpdateEffect = function useUpdateEffect(effect, deps) {\n  var isFirstMount = useFirstMountState();\n  useEffect(function () {\n    !isFirstMount && effect();\n  }, deps);\n};\n\nexport default useUpdateEffect;","import { useRef } from 'react';\nexport function useFirstMountState() {\n  var isFirst = useRef(true);\n\n  if (isFirst.current) {\n    isFirst.current = false;\n    return true;\n  }\n\n  return isFirst.current;\n}","import React from 'react'\nimport SearchInput from \"./components/search-input\";\nimport {useAsyncFn, useUpdateEffect} from \"react-use\";\nimport {useParams} from 'react-router-dom'\nimport newsApi from 'services/news'\nimport NewsList from \"../../shared/components/news-list\";\nimport Loader from 'shared/components/loader'\n\n\nconst Screen = () => {\n\n    const [query, setQuery] = React.useState('');\n    const {code} = useParams()\n\n    // @ts-ignore\n    const [state, fetch] = useAsyncFn(async (q) => {\n        return await newsApi.fetch({\n            country: code,\n            q\n        })\n    }, [code]);\n\n    useUpdateEffect(() => {\n        fetch(query)\n    },[code]\n)\n\n    const onChange = React.useCallback((q: any) => {\n        setQuery(q)\n        fetch(q)\n    }, [fetch])\n\n\n    return <div className='py-5'>\n        <h1 className='text-base text-3xl capitalize p-2'>Search Top news by\n            from {code === 'us' ? 'United States' : 'Great Britain'} term:</h1>\n        <div className='sm:w-full md:w-1/2  mx-auto px-4'>\n            <SearchInput value={query} onChange={onChange}/>\n        </div>\n        {state.loading ? <Loader/>\n            : (Array.isArray(state.value) && state.value.length > 0) ?\n                <NewsList items={state.value}/> : <div>\n                    <h2 className='text-base text-3xl  p-5 text-center'>No results by term</h2>\n                </div>}\n    </div>\n}\n\nexport default Screen\n","export {default} from './screen'\n","import {AxiosError, AxiosRequestConfig} from 'axios';\nimport {IResponseError} from './types';\n\nexport const handleResponseErrors = (error: AxiosError): Promise<IResponseError> => {\n    if (error.code === 'ECONNABORTED') {\n        return Promise.reject({\n            status: 408,\n            statusText: 'Timeout request',\n        });\n    }\n    return Promise.reject({\n        status: error.response ? error.response.status : 500,\n        statusText: error.response ? error.response.statusText : 'Network Error',\n        ...(error.response && error.response.data ? error.response.data : {}),\n    });\n};\n\n/**\n * @description modify request config each time\n *\n * @param {*} config\n */\nexport const handleRequestConfig = async (\n    config: AxiosRequestConfig,\n): Promise<AxiosRequestConfig> => {\n    return {\n        ...config,\n        params: {\n            ...config.params,\n            'apiKey': process.env.REACT_APP_API_KEY,\n        },\n    };\n};\n\n","import axios, {AxiosInstance, AxiosRequestConfig, AxiosResponse, Method} from 'axios';\n\nimport {Omit} from '../../interfaces';\n\nimport {handleRequestConfig, handleResponseErrors} from './utils';\n\nconst TIMEOUT = 5000;\n\n\nexport default class Api {\n    protected api: AxiosInstance;\n\n    constructor() {\n        this.api = axios.create({\n            baseURL: process.env.REACT_APP_API_URL,\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json',\n            },\n            timeout: TIMEOUT,\n        });\n\n        this.api.interceptors.response.use(undefined, handleResponseErrors);\n        this.api.interceptors.request.use(handleRequestConfig);\n    }\n\n    protected request = async <T>(\n        url: string,\n        method: Method = 'GET',\n        data: object | undefined = undefined,\n        params: object | undefined = undefined,\n        config?: Omit<AxiosRequestConfig, 'url' | 'method' | 'data' | 'params' | 'transformResponse'>,\n    ): Promise<T> => {\n        const response = await this.api.request<T, AxiosResponse>({\n            data,\n            method,\n            params,\n            url,\n            ...config,\n        });\n\n        return response.data;\n    };\n\n}\n","import Api from './../api'\nimport {INews, INewsResponse, IPayload} from './types'\n\n\nclass News extends Api {\n    private apiPath: string = '/top-headlines'\n\n    public fetch = async (payload: IPayload): Promise<INews[]> => {\n        const data = await this.request<INewsResponse>(this.apiPath, 'get', undefined, payload);\n        return data.articles\n    }\n}\n\n\nexport default new News()\n","export {default} from './api'\n\nexport * from './types';\n","import React, {FunctionComponent} from 'react'\nimport {INews} from 'services/news'\nimport {Link, useParams} from 'react-router-dom'\n\n\nconst NewsCard: FunctionComponent<INews> = ({title, description, urlToImage, source, content}) => {\n    const {code} = useParams()\n    return <div className=\"max-w-sm rounded overflow-hidden shadow-lg min-h-full flex flex-col justify-between\">\n        <img className=\"w-full h-64 object-cover\" height={200}\n             src={urlToImage || 'http://www.geographicexperiences.com/wp-content/uploads/revslider/home5/placeholder-1200x500.png'}\n             alt={title}/>\n        <div className=\"px-6 py-4\">\n            <div className=\"font-bold mb-2 h-32 sm:text-sm md:text-base overflow-y-hidden\">{title}</div>\n            <p className=\"text-gray-700 text-base overflow-hidden h-32\">\n                {description}\n            </p>\n        </div>\n        <div className=\"px-6 py-4 flex flex-row-reverse\">\n            <Link to={{\n                pathname: `/${code}/news/${source.id}`,\n                state: {\n                    title,\n                    urlToImage,\n                    content\n                }\n            }\n            } className=\"cursor-pointer\">\n            <span\n                className=\"block bg-gray-200 rounded-full px-8 py-4 text-sm font-semibold text-gray-700 hover:bg-gray-500\">More</span>\n            </Link>\n        </div>\n    </div>\n}\n\n\nexport default NewsCard\n","export {default} from './news-card'\n","export {default} from './api'\nexport * from './types'\n","import React, {FunctionComponent} from 'react'\nimport NewsCard from 'shared/components/news-card'\nimport {INews} from 'services/news'\n\ninterface INewsList {\n    items: INews[]\n}\n\nconst NewsList: FunctionComponent<INewsList> = ({items}) => {\n    return <div className=\"flex flex-wrap\">\n        {items.map((item, index) => <div key={index} className={'w-full sm:w-1/2 md:w-1/3 mb-4 p-2'}>\n            <NewsCard key={item.source.id}{...item}/>\n        </div>)}\n    </div>\n}\n\n\nexport default NewsList;\n","export {default} from './news-list'\n","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}"],"sourceRoot":""}